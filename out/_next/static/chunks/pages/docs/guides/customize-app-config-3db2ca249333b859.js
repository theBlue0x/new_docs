(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[901],{5285:function(e,s,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/docs/guides/customize-app-config",function(){return n(6686)}])},6686:function(e,s,n){"use strict";n.r(s);var l=n(5893),i=n(6997),r=n(1151);n(5675);var a=n(1236);function o(e){let s=Object.assign({h1:"h1",h2:"h2",p:"p",code:"code",ul:"ul",li:"li",em:"em",pre:"pre",span:"span",ol:"ol"},(0,r.ah)(),e.components);return a.zH||_missingMdxReference("FileTree",!1),a.zH.File||_missingMdxReference("FileTree.File",!0),a.zH.Folder||_missingMdxReference("FileTree.Folder",!0),(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(s.h1,{children:"Customize app config"}),"\n",(0,l.jsx)(s.h2,{id:"overview",children:"Overview"}),"\n",(0,l.jsxs)(s.p,{children:["In this guide, we'll show you how to customize the configuration of an app by overriding the default ",(0,l.jsx)(s.code,{children:"docker-compose.yml"})," and ",(0,l.jsx)(s.code,{children:"app.env"})," files."]}),"\n",(0,l.jsx)(s.h2,{id:"example-use-cases",children:"Example use cases"}),"\n",(0,l.jsxs)(s.ul,{children:["\n",(0,l.jsxs)(s.li,{children:["Set ",(0,l.jsx)(s.code,{children:"Pihole"})," to listen on a custom IP address"]}),"\n",(0,l.jsxs)(s.li,{children:["Mount an existing volume on your host into a media app such as ",(0,l.jsx)(s.code,{children:"Jellyfin"}),". ",(0,l.jsxs)(s.em,{children:["By default, media apps will only be able to see files within ",(0,l.jsx)(s.code,{children:"runtipi/media"}),", but you can add other volumes."]})]}),"\n"]}),"\n",(0,l.jsxs)(s.p,{children:["An alternative approach to mounting a volume into an app would be to symlink your host volume into ",(0,l.jsx)(s.code,{children:"runtipi/media"}),". However, that would make it visible to all apps that mount the ",(0,l.jsx)(s.code,{children:"media"})," folder, which may not be desirable."]}),"\n",(0,l.jsx)(s.h2,{id:"create-custom-docker-config",children:"Create custom docker config"}),"\n",(0,l.jsxs)(s.p,{children:["In this example we're going to add environment variables to the ",(0,l.jsx)(s.code,{children:"Pihole"})," app and mount the ",(0,l.jsx)(s.code,{children:"/cellar"})," volume into the ",(0,l.jsx)(s.code,{children:"Jellyfin"})," app."]}),"\n",(0,l.jsxs)(s.p,{children:["To determine how to set environment variables to customize the ",(0,l.jsx)(s.code,{children:"Pihole"})," container, we look at ",(0,l.jsx)(s.code,{children:"runtipi/apps/pihole/docker-compose.yml"}),":"]}),"\n",(0,l.jsx)(s.pre,{"data-language":"yml","data-theme":"default",children:(0,l.jsxs)(s.code,{"data-language":"yml","data-theme":"default",children:[(0,l.jsxs)(s.span,{className:"line",children:[(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"ports"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"})]}),"\n",(0,l.jsxs)(s.span,{className:"line",children:[(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  - "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:"${NETWORK_INTERFACE:-0.0.0.0}:53:53/tcp"})]}),"\n",(0,l.jsxs)(s.span,{className:"line",children:[(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  - "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:"${NETWORK_INTERFACE:-0.0.0.0}:53:53/udp"})]}),"\n",(0,l.jsxs)(s.span,{className:"line",children:[(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  - "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:"${NETWORK_INTERFACE:-0.0.0.0}:${APP_PORT}:80"})]})]})}),"\n",(0,l.jsxs)(s.p,{children:["From this, we know that we need to set the ",(0,l.jsx)(s.code,{children:"NETWORK_INTERFACE"})," variable."]}),"\n",(0,l.jsx)(a.UW,{children:(0,l.jsxs)(s.p,{children:["Don't edit the files in the ",(0,l.jsx)(s.code,{children:"apps"})," folder directly; they will be overwritten on update."]})}),"\n",(0,l.jsxs)(s.ol,{children:["\n",(0,l.jsxs)(s.li,{children:["Create ",(0,l.jsx)(s.code,{children:"user-config"})," folder within ",(0,l.jsx)(s.code,{children:"runtipi"})," and a folder for each app:"]}),"\n"]}),"\n",(0,l.jsx)(s.pre,{"data-language":"bash","data-theme":"default",children:(0,l.jsxs)(s.code,{"data-language":"bash","data-theme":"default",children:[(0,l.jsxs)(s.span,{className:"line",children:[(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"cd"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"runtipi"})]}),"\n",(0,l.jsxs)(s.span,{className:"line",children:[(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"mkdir"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"user-config"})]}),"\n",(0,l.jsxs)(s.span,{className:"line",children:[(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"mkdir"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"user-config/jellyfin"})]}),"\n",(0,l.jsxs)(s.span,{className:"line",children:[(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"mkdir"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"user-config/pihole"})]})]})}),"\n",(0,l.jsxs)(s.ol,{start:"2",children:["\n",(0,l.jsxs)(s.li,{children:["Create a ",(0,l.jsx)(s.code,{children:"docker-compose.yml"})," for ",(0,l.jsx)(s.code,{children:"jellyfin"})," and add this content:"]}),"\n"]}),"\n",(0,l.jsx)(s.pre,{"data-language":"bash","data-theme":"default",children:(0,l.jsxs)(s.code,{"data-language":"bash","data-theme":"default",children:[(0,l.jsxs)(s.span,{className:"line",children:[(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"touch"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"user-config/jellyfin/docker-compose.yml"})]}),"\n",(0,l.jsxs)(s.span,{className:"line",children:[(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"nano"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"user-config/jellyfin/docker-compose.yml"})]})]})}),"\n",(0,l.jsx)(s.pre,{"data-language":"yml","data-theme":"default",children:(0,l.jsxs)(s.code,{"data-language":"yml","data-theme":"default",children:[(0,l.jsxs)(s.span,{className:"line",children:[(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"version"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"3.7"'})]}),"\n",(0,l.jsxs)(s.span,{className:"line",children:[(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"services"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"})]}),"\n",(0,l.jsxs)(s.span,{className:"line",children:[(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"jellyfin"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"})]}),"\n",(0,l.jsxs)(s.span,{className:"line",children:[(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"volumes"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"})]}),"\n",(0,l.jsxs)(s.span,{className:"line",children:[(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"      - "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:"/cellar:/cellar"})]})]})}),"\n",(0,l.jsx)(a.UW,{children:(0,l.jsxs)(s.p,{children:["Replace ",(0,l.jsx)(s.code,{children:"/cellar"})," with the volume you want to mount."]})}),"\n",(0,l.jsxs)(s.ol,{start:"3",children:["\n",(0,l.jsxs)(s.li,{children:["Create an ",(0,l.jsx)(s.code,{children:"app.env"})," for ",(0,l.jsx)(s.code,{children:"pihole"})," and add this content:"]}),"\n"]}),"\n",(0,l.jsx)(s.pre,{"data-language":"bash","data-theme":"default",children:(0,l.jsxs)(s.code,{"data-language":"bash","data-theme":"default",children:[(0,l.jsxs)(s.span,{className:"line",children:[(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"touch"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"user-config/pihole/app.env"})]}),"\n",(0,l.jsxs)(s.span,{className:"line",children:[(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"nano"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"user-config/pihole/app.env"})]})]})}),"\n",(0,l.jsx)(s.pre,{"data-language":"conf","data-theme":"default",children:(0,l.jsx)(s.code,{"data-language":"conf","data-theme":"default",children:(0,l.jsx)(s.span,{className:"line",children:(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"NETWORK_INTERFACE=10.20.0.53"})})})}),"\n",(0,l.jsx)(a.UW,{children:(0,l.jsxs)(s.p,{children:["Replace ",(0,l.jsx)(s.code,{children:"10.20.0.53"})," with the IP address you want pihole to listen on."]})}),"\n",(0,l.jsxs)(s.ol,{start:"4",children:["\n",(0,l.jsx)(s.li,{children:"You should end up with a structure like this:"}),"\n"]}),"\n",(0,l.jsx)(a.zH,{children:(0,l.jsxs)(a.zH.Folder,{name:"runtipi",defaultOpen:!0,children:[(0,l.jsx)(a.zH.Folder,{name:"app-data"}),(0,l.jsx)(a.zH.Folder,{name:"apps"}),(0,l.jsxs)(a.zH.Folder,{name:"user-config",defaultOpen:!0,children:[(0,l.jsx)(a.zH.Folder,{name:"jellyfin",defaultOpen:!0,children:(0,l.jsx)(a.zH.File,{name:"docker-compose.yml"})}),(0,l.jsx)(a.zH.Folder,{name:"pihole",defaultOpen:!0,children:(0,l.jsx)(a.zH.File,{name:"app.env"})})]})]})}),"\n",(0,l.jsxs)(s.ol,{start:"5",children:["\n",(0,l.jsx)(s.li,{children:"Restart the apps and test:"}),"\n"]}),"\n",(0,l.jsx)(s.pre,{"data-language":"bash","data-theme":"default",children:(0,l.jsxs)(s.code,{"data-language":"bash","data-theme":"default",children:[(0,l.jsxs)(s.span,{className:"line",children:[(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"./scripts/app.sh"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"stop"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"jellyfin"})]}),"\n",(0,l.jsxs)(s.span,{className:"line",children:[(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"./scripts/app.sh"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"stop"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"pihole"})]}),"\n",(0,l.jsxs)(s.span,{className:"line",children:[(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"./scripts/app.sh"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"start"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"jellyfin"})]}),"\n",(0,l.jsxs)(s.span,{className:"line",children:[(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"./scripts/app.sh"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"start"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"pihole"})]})]})}),"\n",(0,l.jsxs)(s.ul,{children:["\n",(0,l.jsx)(s.li,{children:"Test Jellyfin by opening the app and configuring a library. You should now see your mounted volume."}),"\n",(0,l.jsx)(s.li,{children:"Test Pihole with a DNS query to the new IP address:"}),"\n"]}),"\n",(0,l.jsx)(s.pre,{"data-language":"bash","data-theme":"default",children:(0,l.jsx)(s.code,{"data-language":"bash","data-theme":"default",children:(0,l.jsxs)(s.span,{className:"line",children:[(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"nslookup"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"google.com"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"10.20"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:".0.53"})]})})}),"\n",(0,l.jsx)(s.pre,{"data-language":"text","data-theme":"default",children:(0,l.jsxs)(s.code,{"data-language":"text","data-theme":"default",children:[(0,l.jsx)(s.span,{className:"line",children:(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"Server:         10.20.0.53"})}),"\n",(0,l.jsx)(s.span,{className:"line",children:(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"Address:        10.20.0.53#53"})}),"\n",(0,l.jsx)(s.span,{className:"line",children:(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"}})}),"\n",(0,l.jsx)(s.span,{className:"line",children:(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"Non-authoritative answer:"})}),"\n",(0,l.jsx)(s.span,{className:"line",children:(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"Name:   google.com"})}),"\n",(0,l.jsx)(s.span,{className:"line",children:(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"Address: 142.250.200.46"})}),"\n",(0,l.jsx)(s.span,{className:"line",children:(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"Name:   google.com"})}),"\n",(0,l.jsx)(s.span,{className:"line",children:(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"Address: 2a00:1450:4009:822::200e"})})]})})]})}s.default=(0,i.j)({MDXContent:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:s}=Object.assign({},(0,r.ah)(),e.components);return s?(0,l.jsx)(s,{...e,children:(0,l.jsx)(o,{...e})}):o(e)},pageOpts:{filePath:"pages/docs/guides/customize-app-config.mdx",route:"/docs/guides/customize-app-config",headings:[{depth:1,value:"Customize app config",id:"customize-app-config"},{depth:2,value:"Overview",id:"overview"},{depth:2,value:"Example use cases",id:"example-use-cases"},{depth:2,value:"Create custom docker config",id:"create-custom-docker-config"}],timestamp:1689351904e3,title:"Customize app config"},pageNextRoute:"/docs/guides/customize-app-config"})}},function(e){e.O(0,[997,774,888,179],function(){return e(e.s=5285)}),_N_E=e.O()}]);